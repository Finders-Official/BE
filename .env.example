# ========================================
# Finders API 환경 변수 템플릿
# ========================================
#
# 사용법:
#   로컬 개발: cp .env.example .env
#   개발 서버: cp .env.example .env.dev
#   운영 서버: cp .env.example .env.prod
#
# ========================================

# ========================================
# Spring Profile
# ========================================
# local: 로컬 개발 (Docker MySQL + Docker Redis)
# dev: 개발 서버 (GCP Cloud SQL + Docker Redis)
# prod: 운영 서버 (GCP Cloud SQL + Upstash Redis)
SPRING_PROFILES_ACTIVE=local

# ========================================
# Database (MySQL)
# ========================================
# Spring Boot 자동 매핑: SPRING_DATASOURCE_* → spring.datasource.*
#
# [로컬] Docker MySQL (기본값 - 설정 안해도 됨)
# [배포] GCP Cloud SQL - 아래 값 변경
SPRING_DATASOURCE_URL=jdbc:mysql://localhost:3306/finders?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=Asia/Seoul
SPRING_DATASOURCE_USERNAME=finders
SPRING_DATASOURCE_PASSWORD=finders123

# ========================================
# Redis (캐싱)
# ========================================
# [로컬] Docker Redis (docker-compose.yml로 자동 실행)
# [dev] Docker Redis (docker-compose.dev.yml에 포함)
# [prod] Upstash Redis (SSL 필수)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# ========================================
# JWT
# ========================================
# 배포 시 반드시 변경! 생성: openssl rand -base64 48
JWT_SECRET=your-jwt-secret-key-must-be-at-least-256-bits-long-for-hs256

# ========================================
# Kakao API (REST API 키 사용)
# ========================================
# 카카오 로그인 + 주소→좌표 변환 (Kakao Local API)
KAKAO_CLIENT_ID=
KAKAO_CLIENT_SECRET=
KAKAO_ADMIN_KEY=
KAKAO_REDIRECT_URI=http://localhost:8080/api/auth/kakao/callback

# ========================================
# OAuth2 - Apple (현재 미사용)
# ========================================
# APPLE_CLIENT_ID=
# APPLE_TEAM_ID=
# APPLE_KEY_ID=
# APPLE_REDIRECT_URI=http://localhost:8080/api/auth/apple/callback

# ========================================
# Google Cloud
# ========================================
GOOGLE_CLOUD_PROJECT=
# GCS 버킷 설정
GCS_PUBLIC_BUCKET=
GCS_PRIVATE_BUCKET=
GCS_SIGNED_URL_EXPIRY=60
# GCE 환경에서 Signed URL 생성 시 사용할 서비스 계정 이메일
# 로컬에서 JSON 키 파일 사용 시 생략 가능
GCS_SERVICE_ACCOUNT_EMAIL=

# ========================================
# JPA 설정
# ========================================
# 로컬/dev: update (엔티티 변경 시 자동 반영)
# prod: validate (스키마 검증만)
SPRING_JPA_HIBERNATE_DDL_AUTO=update

# ========================================
# PortOne V2 (포트원)
# ========================================
# API 키 발급: https://admin.portone.io (관리자콘솔 → 결제연동 → API Keys)
PORTONE_API_SECRET=

# ========================================
# Replicate AI (사진 복원)
# ========================================
# API 키: https://replicate.com/account/api-tokens
REPLICATE_API_KEY=
# Inpainting 모델 버전 (SDXL Inpainting - 원본 비율 유지, max 1024px)
# https://replicate.com/lucataco/sdxl-inpainting
REPLICATE_MODEL_VERSION=a5b13068cc81a89a4fbeefeccc774869fcb34df4dbc92c1555e0f2771d49dde7
# 웹훅 콜백 URL (로컬: ngrok 사용, 배포: 실제 도메인)
WEBHOOK_BASE_URL=http://localhost:8080/api
# 웹훅 시크릿 (Replicate 콘솔에서 설정)
REPLICATE_WEBHOOK_SECRET=

# ========================================
# CORS (허용 도메인)
# ========================================
# 쉼표로 구분, 배포 시 실제 도메인으로 변경
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173

# ========================================
# 개발용 토큰 발급
# ========================================
LOGIN_SECRET_KEY=local-dummy-key

# ========================================
# Sentry (에러 모니터링)
# ========================================
# DSN 확인: Sentry → Project Settings → Client Keys (DSN)
# 로컬에서는 비활성화됨 (application-local.yml)
SENTRY_DSN=

# ========================================
# Sendon (카카오톡 알림톡 대행사)
# ========================================
SENDON_ID=
SENDON_API_KEY=
SENDON_SENDER_KEY=
SENDON_PHONE_TEMPLATE_CODE=

# ========================================
# Discord (에러 알림)
# ========================================
# Webhook URL: Discord 서버 설정 → 연동 → 웹후크 만들기
# prod에서만 활성화 (application-prod.yml)
DISCORD_WEBHOOK_URL=

# ========================================
# 배포 서버 전용 (로컬에서는 불필요)
# ========================================
# Cloudflare Tunnel 토큰 (docker-compose.infra.yml에서 사용)
# TUNNEL_TOKEN=
# 리버스 프록시 뒤에서 X-Forwarded-* 헤더 신뢰
# SERVER_FORWARD_HEADERS_STRATEGY=framework